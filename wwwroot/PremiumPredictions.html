<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Premium HLC Predictions - Market Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --success-color: #27ae60;
            --warning-color: #f39c12;
            --danger-color: #e74c3c;
            --dark-color: #34495e;
            --light-color: #ecf0f1;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            min-height: 100vh;
        }

        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            height: 100vh;
            width: 280px;
            background: rgba(44, 62, 80, 0.95);
            backdrop-filter: blur(10px);
            border-right: 3px solid var(--secondary-color);
            z-index: 1000;
            overflow-y: auto;
            transition: transform 0.3s ease;
        }

        .sidebar-header {
            padding: 20px;
            text-align: center;
            border-bottom: 2px solid var(--secondary-color);
        }

        .sidebar-header h4 {
            color: white;
            margin: 0;
            font-weight: bold;
        }

        .nav-item {
            margin: 5px 0;
        }

        .nav-link {
            display: flex;
            align-items: center;
            padding: 12px 20px;
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
        }

        .nav-link:hover {
            color: white;
            background: rgba(52, 152, 219, 0.2);
            border-left-color: var(--secondary-color);
        }

        .nav-link.active {
            color: white;
            background: rgba(52, 152, 219, 0.3);
            border-left-color: var(--secondary-color);
        }

        .nav-link i {
            margin-right: 12px;
            width: 20px;
            text-align: center;
        }

        .main-content {
            margin-left: 280px;
            padding: 20px;
            min-height: 100vh;
        }

        .page-header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .page-header h1 {
            color: white;
            margin: 0;
            font-size: 2.5rem;
            font-weight: bold;
        }

        .subtitle {
            color: rgba(255, 255, 255, 0.8);
            font-size: 1.1rem;
            margin-top: 10px;
        }

        .content-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .premium-prediction-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            color: white;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }

        .prediction-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .strike-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .strike-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .strike-title {
            font-size: 1.2rem;
            font-weight: bold;
        }

        .confidence-badge {
            background: var(--success-color);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .premium-values {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
            margin-top: 15px;
        }

        .premium-item {
            text-align: center;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 15px;
        }

        .premium-label {
            font-size: 0.9rem;
            opacity: 0.8;
            margin-bottom: 5px;
        }

        .premium-value {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .premium-change {
            font-size: 0.8rem;
            opacity: 0.9;
        }

        .pattern-insights {
            background: linear-gradient(135deg, #27ae60 0%, #2ecc71 100%);
            border-radius: 15px;
            padding: 25px;
            margin-top: 25px;
            color: white;
        }

        .pattern-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .pattern-item {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 10px;
            border-left: 4px solid rgba(255, 255, 255, 0.5);
        }

        .pattern-name {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .pattern-description {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .index-selector {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 25px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .index-selector label {
            color: white;
            font-weight: bold;
            margin-right: 15px;
        }

        .index-selector select {
            background: rgba(255, 255, 255, 0.9);
            border: none;
            border-radius: 8px;
            padding: 10px 15px;
            font-size: 1rem;
            min-width: 150px;
        }

        .loading-spinner {
            text-align: center;
            padding: 40px;
            color: white;
        }

        .spinner-border {
            width: 3rem;
            height: 3rem;
            border-width: 0.3em;
        }

        .summary-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 25px;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }

        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }
            
            .main-content {
                margin-left: 0;
                padding: 15px;
            }
            
            .prediction-grid {
                grid-template-columns: 1fr;
            }
            
            .premium-values {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar">
        <div class="sidebar-header">
            <h4><i class="fas fa-chart-line"></i> Market Dashboard</h4>
        </div>
        <div class="nav-item">
            <a href="AdvancedDashboard.html" class="nav-link">
                <i class="fas fa-tachometer-alt"></i> Dashboard Overview
            </a>
        </div>
        <div class="nav-item">
            <a href="AdvancedDashboard.html#predictions" class="nav-link">
                <i class="fas fa-chart-line"></i> Today's Predictions
            </a>
        </div>
        <div class="nav-item">
            <a href="#" class="nav-link active">
                <i class="fas fa-coins"></i> Premium HLC Predictions
            </a>
        </div>
        <div class="nav-item">
            <a href="AdvancedDashboard.html#process-breakdown" class="nav-link">
                <i class="fas fa-cogs"></i> Process Breakdown
            </a>
        </div>
        <div class="nav-item">
            <a href="AdvancedDashboard.html#pattern-insights" class="nav-link">
                <i class="fas fa-lightbulb"></i> Pattern Insights
            </a>
        </div>
        <div class="nav-item">
            <a href="AdvancedDashboard.html#live-market" class="nav-link">
                <i class="fas fa-satellite-dish"></i> Live Market
            </a>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Page Header -->
        <div class="page-header">
            <h1><i class="fas fa-coins"></i> Premium HLC Predictions</h1>
            <div class="subtitle">Individual Strike Premium High, Low, Close Predictions â€¢ October 13, 2025</div>
        </div>

        <!-- Index Selector -->
        <div class="index-selector">
            <label for="index-select"><i class="fas fa-filter"></i> Select Index:</label>
            <select id="index-select" onchange="updatePremiumPredictions()">
                <option value="SENSEX">SENSEX</option>
                <option value="BANKNIFTY">BANKNIFTY</option>
                <option value="NIFTY">NIFTY</option>
            </select>
            <button class="btn btn-light ms-3" onclick="refreshPremiumPredictions()">
                <i class="fas fa-sync"></i> Refresh Predictions
            </button>
        </div>

        <!-- Summary Statistics -->
        <div class="summary-stats" id="summary-stats">
            <div class="stat-card">
                <div class="stat-value" id="total-strikes">-</div>
                <div class="stat-label">Total Strikes</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="avg-confidence">-</div>
                <div class="stat-label">Avg Confidence</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="avg-volatility">-</div>
                <div class="stat-label">Avg Volatility</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="strike-range">-</div>
                <div class="stat-label">Strike Range</div>
            </div>
        </div>

        <!-- Loading Spinner -->
        <div class="loading-spinner" id="loading-spinner">
            <div class="spinner-border text-light" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
            <div class="mt-3">Analyzing Premium HLC Patterns...</div>
        </div>

        <!-- Premium Predictions Grid -->
        <div class="prediction-grid" id="prediction-grid" style="display: none;">
            <!-- Premium predictions will be populated here -->
        </div>

        <!-- Pattern Insights -->
        <div class="pattern-insights" id="pattern-insights" style="display: none;">
            <h3><i class="fas fa-lightbulb"></i> Cross-Strike Premium Patterns</h3>
            <ul class="pattern-list" id="pattern-list">
                <!-- Patterns will be populated here -->
            </ul>
        </div>

        <!-- Analysis Details -->
        <div class="content-card" id="analysis-details" style="display: none;">
            <h3><i class="fas fa-microscope"></i> Premium HLC Analysis Details</h3>
            <div class="row">
                <div class="col-md-6">
                    <h5>Pattern Types:</h5>
                    <ul>
                        <li><strong>Gradient Pattern:</strong> Premium change rate across strikes</li>
                        <li><strong>Ratio Pattern:</strong> CE/PE premium relationships</li>
                        <li><strong>Gap Pattern:</strong> Strike gap consistency analysis</li>
                        <li><strong>Volatility Pattern:</strong> Premium movement predictions</li>
                    </ul>
                </div>
                <div class="col-md-6">
                    <h5>Prediction Methods:</h5>
                    <ul>
                        <li><strong>Reference Comparison:</strong> Based on previous day patterns</li>
                        <li><strong>Circuit Analysis:</strong> Using UC/LC limits</li>
                        <li><strong>Volatility Scaling:</strong> Adjusted for market conditions</li>
                        <li><strong>Cross-Validation:</strong> Multiple pattern confirmation</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Premium HLC Prediction Data (Mock data - replace with actual API calls)
        const premiumPredictionsData = {
            'SENSEX': [
                {
                    strike: 82000,
                    optionType: 'CE',
                    currentPremium: 3660.60,
                    predictedHigh: 4120.50,
                    predictedLow: 2850.40,
                    predictedClose: 3485.75,
                    confidence: 92,
                    volatility: 35.2,
                    patterns: ['UC/LC Ratio Stability', 'Volatility Consistency']
                },
                {
                    strike: 82000,
                    optionType: 'PE',
                    currentPremium: 1766.40,
                    predictedHigh: 1980.20,
                    predictedLow: 1420.15,
                    predictedClose: 1700.85,
                    confidence: 88,
                    volatility: 28.7,
                    patterns: ['Trend Continuation', 'Premium Gradient']
                },
                {
                    strike: 82100,
                    optionType: 'CE',
                    currentPremium: 4120.80,
                    predictedHigh: 4650.25,
                    predictedLow: 3150.60,
                    predictedClose: 3900.45,
                    confidence: 95,
                    volatility: 42.1,
                    patterns: ['UC/LC Ratio Stability', 'Volatility Consistency', 'Trend Continuation']
                },
                {
                    strike: 82100,
                    optionType: 'PE',
                    currentPremium: 1950.30,
                    predictedHigh: 2180.45,
                    predictedLow: 1560.20,
                    predictedClose: 1870.75,
                    confidence: 90,
                    volatility: 31.5,
                    patterns: ['Premium Gradient', 'CE/PE Ratio Pattern']
                },
                {
                    strike: 82200,
                    optionType: 'CE',
                    currentPremium: 4850.40,
                    predictedHigh: 5450.60,
                    predictedLow: 3650.80,
                    predictedClose: 4550.20,
                    confidence: 93,
                    volatility: 38.9,
                    patterns: ['UC/LC Ratio Stability', 'Volatility Consistency']
                },
                {
                    strike: 82200,
                    optionType: 'PE',
                    currentPremium: 2150.70,
                    predictedHigh: 2420.85,
                    predictedLow: 1720.40,
                    predictedClose: 2070.60,
                    confidence: 87,
                    volatility: 29.8,
                    patterns: ['Trend Continuation', 'Premium Gradient']
                }
            ],
            'BANKNIFTY': [
                {
                    strike: 56200,
                    optionType: 'CE',
                    currentPremium: 1250.40,
                    predictedHigh: 1420.60,
                    predictedLow: 980.20,
                    predictedClose: 1200.85,
                    confidence: 89,
                    volatility: 32.4,
                    patterns: ['UC/LC Ratio Stability']
                },
                {
                    strike: 56200,
                    optionType: 'PE',
                    currentPremium: 850.30,
                    predictedHigh: 950.45,
                    predictedLow: 680.15,
                    predictedClose: 815.75,
                    confidence: 85,
                    volatility: 27.6,
                    patterns: ['Premium Gradient']
                }
            ],
            'NIFTY': [
                {
                    strike: 25200,
                    optionType: 'CE',
                    currentPremium: 420.60,
                    predictedHigh: 485.20,
                    predictedLow: 325.40,
                    predictedClose: 405.85,
                    confidence: 91,
                    volatility: 34.8,
                    patterns: ['UC/LC Ratio Stability', 'Volatility Consistency']
                },
                {
                    strike: 25200,
                    optionType: 'PE',
                    currentPremium: 285.40,
                    predictedHigh: 320.75,
                    predictedLow: 230.15,
                    predictedClose: 275.60,
                    confidence: 86,
                    volatility: 26.9,
                    patterns: ['Trend Continuation']
                }
            ]
        };

        // Cross-strike patterns data
        const crossStrikePatterns = {
            'SENSEX': [
                {
                    patternName: 'CE Premium Gradient',
                    patternType: 'Gradient',
                    confidence: 85,
                    description: 'Premium gradient: 0.045 per strike point (Consistent)',
                    affectedStrikes: [82000, 82100, 82200],
                    patternValue: 0.045
                },
                {
                    patternName: 'PE Premium Gradient',
                    patternType: 'Gradient',
                    confidence: 82,
                    description: 'Premium gradient: 0.038 per strike point (Consistent)',
                    affectedStrikes: [82000, 82100, 82200],
                    patternValue: 0.038
                },
                {
                    patternName: 'CE/PE Premium Ratio',
                    patternType: 'Ratio',
                    confidence: 80,
                    description: 'Average CE/PE ratio: 2.15 (Consistent)',
                    affectedStrikes: [82000, 82100, 82200],
                    patternValue: 2.15
                }
            ],
            'BANKNIFTY': [
                {
                    patternName: 'CE Premium Gradient',
                    patternType: 'Gradient',
                    confidence: 78,
                    description: 'Premium gradient: 0.032 per strike point (Variable)',
                    affectedStrikes: [56200],
                    patternValue: 0.032
                }
            ],
            'NIFTY': [
                {
                    patternName: 'CE/PE Premium Ratio',
                    patternType: 'Ratio',
                    confidence: 83,
                    description: 'Average CE/PE ratio: 1.48 (Consistent)',
                    affectedStrikes: [25200],
                    patternValue: 1.48
                }
            ]
        };

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            updatePremiumPredictions();
        });

        // Update premium predictions based on selected index
        function updatePremiumPredictions() {
            const selectedIndex = document.getElementById('index-select').value;
            const predictions = premiumPredictionsData[selectedIndex] || [];
            const patterns = crossStrikePatterns[selectedIndex] || [];
            
            // Show loading
            document.getElementById('loading-spinner').style.display = 'block';
            document.getElementById('prediction-grid').style.display = 'none';
            document.getElementById('pattern-insights').style.display = 'none';
            document.getElementById('analysis-details').style.display = 'none';
            
            // Simulate loading delay
            setTimeout(() => {
                updateSummaryStats(predictions);
                updatePredictionGrid(predictions);
                updatePatternInsights(patterns);
                
                // Hide loading and show content
                document.getElementById('loading-spinner').style.display = 'none';
                document.getElementById('prediction-grid').style.display = 'grid';
                document.getElementById('pattern-insights').style.display = 'block';
                document.getElementById('analysis-details').style.display = 'block';
            }, 1500);
        }

        // Update summary statistics
        function updateSummaryStats(predictions) {
            if (!predictions.length) return;
            
            document.getElementById('total-strikes').textContent = predictions.length;
            document.getElementById('avg-confidence').textContent = 
                Math.round(predictions.reduce((sum, p) => sum + p.confidence, 0) / predictions.length) + '%';
            document.getElementById('avg-volatility').textContent = 
                (predictions.reduce((sum, p) => sum + p.volatility, 0) / predictions.length).toFixed(1) + '%';
            
            const strikes = predictions.map(p => p.strike);
            document.getElementById('strike-range').textContent = 
                `${Math.min(...strikes).toLocaleString()} - ${Math.max(...strikes).toLocaleString()}`;
        }

        // Update prediction grid
        function updatePredictionGrid(predictions) {
            const grid = document.getElementById('prediction-grid');
            grid.innerHTML = '';
            
            predictions.forEach(prediction => {
                const card = createStrikeCard(prediction);
                grid.appendChild(card);
            });
        }

        // Create strike prediction card
        function createStrikeCard(prediction) {
            const card = document.createElement('div');
            card.className = 'strike-card';
            
            const highChange = ((prediction.predictedHigh - prediction.currentPremium) / prediction.currentPremium * 100).toFixed(1);
            const lowChange = ((prediction.predictedLow - prediction.currentPremium) / prediction.currentPremium * 100).toFixed(1);
            const closeChange = ((prediction.predictedClose - prediction.currentPremium) / prediction.currentPremium * 100).toFixed(1);
            
            card.innerHTML = `
                <div class="strike-header">
                    <div class="strike-title">${prediction.strike.toLocaleString()} ${prediction.optionType}</div>
                    <div class="confidence-badge">${prediction.confidence}%</div>
                </div>
                
                <div class="premium-values">
                    <div class="premium-item">
                        <div class="premium-label">HIGH</div>
                        <div class="premium-value">${prediction.predictedHigh.toLocaleString()}</div>
                        <div class="premium-change">${highChange > 0 ? '+' : ''}${highChange}%</div>
                    </div>
                    <div class="premium-item">
                        <div class="premium-label">LOW</div>
                        <div class="premium-value">${prediction.predictedLow.toLocaleString()}</div>
                        <div class="premium-change">${lowChange > 0 ? '+' : ''}${lowChange}%</div>
                    </div>
                    <div class="premium-item">
                        <div class="premium-label">CLOSE</div>
                        <div class="premium-value">${prediction.predictedClose.toLocaleString()}</div>
                        <div class="premium-change">${closeChange > 0 ? '+' : ''}${closeChange}%</div>
                    </div>
                </div>
                
                <div style="margin-top: 15px; font-size: 0.9rem; opacity: 0.9;">
                    <div><strong>Current:</strong> ${prediction.currentPremium.toLocaleString()}</div>
                    <div><strong>Volatility:</strong> ${prediction.volatility}%</div>
                    <div><strong>Patterns:</strong> ${prediction.patterns.join(', ')}</div>
                </div>
            `;
            
            return card;
        }

        // Update pattern insights
        function updatePatternInsights(patterns) {
            const patternList = document.getElementById('pattern-list');
            patternList.innerHTML = '';
            
            patterns.forEach(pattern => {
                const item = document.createElement('li');
                item.className = 'pattern-item';
                item.innerHTML = `
                    <div class="pattern-name">${pattern.patternName} (${pattern.confidence}%)</div>
                    <div class="pattern-description">${pattern.description}</div>
                    <div style="font-size: 0.8rem; margin-top: 5px; opacity: 0.8;">
                        Affected Strikes: ${pattern.affectedStrikes.map(s => s.toLocaleString()).join(', ')}
                    </div>
                `;
                patternList.appendChild(item);
            });
        }

        // Refresh predictions
        function refreshPremiumPredictions() {
            const button = event.target;
            const originalText = button.innerHTML;
            button.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Refreshing...';
            button.disabled = true;
            
            setTimeout(() => {
                updatePremiumPredictions();
                button.innerHTML = originalText;
                button.disabled = false;
            }, 2000);
        }
    </script>
</body>
</html>
